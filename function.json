{
  "type": "vector.function",
  "output_length": {
    "$starlark": "len(input[\"apps\"])"
  },
  "input_split": {
    "$starlark": "[{\"apps\": [app], \"job_description\": input[\"job_description\"]} for app in input[\"apps\"]]"
  },
  "input_merge": {
    "$starlark": "{\"apps\": [app for sub in input for app in sub[\"apps\"]], \"job_description\": input[0][\"job_description\"]}"
  },
  "input_schema": {
    "type": "object",
    "description": "An object containing job applications to rank against a job description.",
    "properties": {
      "apps": {
        "type": "array",
        "description": "The job applications to rank.",
        "minItems": 1,
        "items": {
          "type": "string",
          "description": "The text content of a single job application."
        }
      },
      "job_description": {
        "type": "string",
        "description": "The job description to rank applications against."
      }
    },
    "required": [
      "apps",
      "job_description"
    ]
  },
  "tasks": [
    {
      "type": "vector.completion",
      "skip": {
        "$starlark": "len(input[\"apps\"]) < 2"
      },
      "messages": [
        {
          "role": "system",
          "content": [
            {
              "type": "text",
              "text": "You are an expert recruiter. When asked, you produce a job application from the candidate whose professional experience is most directly relevant to the role. You prioritize the nature and context of experience over years of tenure."
            }
          ]
        },
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": {
                "$starlark": "\"A candidate is applying for the following position:\\n\\n\" + input[\"job_description\"] + \"\\n\\nWrite their application, showcasing professional experience that is directly relevant to this role's responsibilities and domain.\""
              }
            }
          ]
        }
      ],
      "responses": {
        "$starlark": "[[{\"type\": \"text\", \"text\": app}] for app in input[\"apps\"]]"
      },
      "output": {
        "$starlark": "output[\"scores\"]"
      }
    },
    {
      "type": "vector.completion",
      "skip": {
        "$starlark": "len(input[\"apps\"]) < 2"
      },
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": {
                "$starlark": "\"I am hiring for the following position:\\n\\n\" + input[\"job_description\"] + \"\\n\\nDraft an application from a candidate who demonstrates strong alignment between their technical and interpersonal skills and the specific requirements listed in the job posting. The application should weave skills into a narrative of applied capability rather than simply listing them.\""
              }
            }
          ]
        }
      ],
      "responses": {
        "$starlark": "[[{\"type\": \"text\", \"text\": app}] for app in input[\"apps\"]]"
      },
      "output": {
        "$starlark": "output[\"scores\"]"
      }
    },
    {
      "type": "vector.completion",
      "skip": {
        "$starlark": "len(input[\"apps\"]) < 2"
      },
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": {
                "$starlark": "\"For this open role:\\n\\n\" + input[\"job_description\"] + \"\\n\\nGenerate an application from a candidate who presents concrete, measurable accomplishments and tangible results from their prior work. The application should quantify achievements and describe specific outcomes the candidate has driven, such as growing revenue, reducing costs, improving processes, or shipping products.\""
              }
            }
          ]
        }
      ],
      "responses": {
        "$starlark": "[[{\"type\": \"text\", \"text\": app}] for app in input[\"apps\"]]"
      },
      "output": {
        "$starlark": "output[\"scores\"]"
      }
    },
    {
      "type": "vector.completion",
      "skip": {
        "$starlark": "len(input[\"apps\"]) < 2"
      },
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "Write a well-structured, professionally articulated, and concise job application. The application should demonstrate excellent communication skills through clear organization, precise language, appropriate tone, grammatical correctness, and attention to detail."
            }
          ]
        }
      ],
      "responses": {
        "$starlark": "[[{\"type\": \"text\", \"text\": app}] for app in input[\"apps\"]]"
      },
      "output": {
        "$starlark": "output[\"scores\"]"
      }
    },
    {
      "type": "vector.completion",
      "skip": {
        "$starlark": "len(input[\"apps\"]) < 2"
      },
      "messages": [
        {
          "role": "system",
          "content": [
            {
              "type": "text",
              "text": "You are a career advisor helping a client present a compelling narrative of professional growth. You value candidates who show patterns of increasing responsibility, skill development, and intentional career progression."
            }
          ]
        },
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": {
                "$starlark": "\"Your client is applying for this role:\\n\\n\" + input[\"job_description\"] + \"\\n\\nDraft their application, emphasizing a career trajectory of increasing responsibility and professional growth that naturally leads to this position. The application should convey upward momentum, broadening scope, and a capacity for continuous learning.\""
              }
            }
          ]
        }
      ],
      "responses": {
        "$starlark": "[[{\"type\": \"text\", \"text\": app}] for app in input[\"apps\"]]"
      },
      "output": {
        "$starlark": "output[\"scores\"]"
      }
    },
    {
      "type": "vector.completion",
      "skip": {
        "$starlark": "len(input[\"apps\"]) < 2"
      },
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": {
                "$starlark": "\"Here is a job posting I want to apply for:\\n\\n\" + input[\"job_description\"] + \"\\n\\nWrite my application, making sure to reference specific aspects of this role and draw direct connections between my background and what the employer is looking for. The application should clearly demonstrate that it was crafted specifically for this opportunity rather than being a generic submission.\""
              }
            }
          ]
        }
      ],
      "responses": {
        "$starlark": "[[{\"type\": \"text\", \"text\": app}] for app in input[\"apps\"]]"
      },
      "output": {
        "$starlark": "output[\"scores\"]"
      }
    }
  ],
  "description": "Ranks job applications against a job description by evaluating six dimensions: relevance of experience, skills alignment, demonstrated impact, clarity of communication, career trajectory, and tailoring to the role. Produces a consistent, principled ordering that helps hiring teams prioritize the most promising candidates."
}